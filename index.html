<html>

<html>
<head>
  <meta charset="utf-8">
  <!-- Meta tags for social media banners, these should be filled in appropriatly as they are your "business card" -->
  <!-- Replace the content tag with appropriate information -->
  <meta name="description" content="DESCRIPTION META TAG">
  <meta property="og:title" content="SOCIAL MEDIA TITLE TAG"/>
  <meta property="og:description" content="SOCIAL MEDIA DESCRIPTION TAG TAG"/>
  <meta property="og:url" content="URL OF THE WEBSITE"/>
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X630-->
  <meta property="og:image" content="static/image/your_banner_image.png" />
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>


  <meta name="twitter:title" content="TWITTER BANNER TITLE META TAG">
  <meta name="twitter:description" content="TWITTER BANNER DESCRIPTION META TAG">
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X600-->
  <meta name="twitter:image" content="static/images/your_twitter_banner_image.png">
  <meta name="twitter:card" content="summary_large_image">
  <!-- Keywords for your paper to be indexed by-->
  <meta name="keywords" content="KEYWORDS SHOULD BE PLACED HERE">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 网页名称-->
  <title>ESA</title>
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
  rel="stylesheet">


  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>
</head>
<body>


  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <!-- 网页标题 -->
            <h3 class="xtitle is-1 publication-title">ESA: Energy-Based Shot Assembly Optimization
              for Intelligent Video Editing</h3> 
          </div>
        </div>
      </div>
    </div>
</section>




<head>
  <title>ESA</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <link type="text/css" rel="stylesheet" href="main.css">
</head>




  


  <p class="section" id="results">参考视频1-实验1</p>
  <div class="text-to-3d-examplesss">
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/reference/Ipartment_cut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">参考视频</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/traveling/turbo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频1</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/traveling/turboclip.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频2</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/traveling/ours.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频3</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/traveling/capcut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频4</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/traveling/jichuang.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频5</p>
    </div>
  </div>
    </section>
    </section>



     <p class="section" id="results">参考视频1-实验2</p>
  <div class="text-to-3d-examplesss">
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/reference/Ipartment_cut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">参考视频</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/military/turbo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频1</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/military/turboclip.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频2</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/military/ours.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频3</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/military/capcut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频4</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/military/jichuang.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频5</p>
    </div>
  </div>
    </section>
    </section>




    <p class="section" id="results">参考视频1-实验3</p>
  <div class="text-to-3d-examplesss">
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/reference/Ipartment_cut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">参考视频</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/shopping/turbo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频1</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/shopping/turboclip.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频2</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/shopping/ours.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频3</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/shopping/capcut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频4</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/shopping/jichuang.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频5</p>
    </div>
  </div>
    </section>
    </section>



    <p class="section" id="results">参考视频2-实验1</p>
  <div class="text-to-3d-examplesss">
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/reference/liziqi.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">参考视频</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/cooking/turbo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频1</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/cooking/turboclip.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频2</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/cooking/ours.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频3</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/cooking/capcut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频4</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/cooking/jichuang.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频5</p>
    </div>
  </div>
    </section>
    </section>



     <p class="section" id="results">参考视频2-实验2</p>
  <div class="text-to-3d-examplesss">
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/reference/liziqi.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">参考视频</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/bbq/turbo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频1</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/bbq/turboclip.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频2</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/bbq/ours.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频3</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/bbq/capcut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频4</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/bbq/jichuang.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频5</p>
    </div>
  </div>
    </section>
    </section>




    <p class="section" id="results">参考视频2-实验3</p>
  <div class="text-to-3d-examplesss">
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/reference/liziqi.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">参考视频</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/chicken/turbo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频1</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/chicken/turboclip.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频2</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/chicken/ours.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频3</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/chicken/capcut.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频4</p>
    </div>
    <div class="video-container">
      <video width="100%" controls muted loop>
        <source src="assets/chicken/jichuang.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="video-title">视频5</p>
    </div>
  </div>
    </section>
    </section>
  


</div>





<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

<script type="module">

  import * as THREE from "https://unpkg.com/three?module";

  import { OrbitControls } from "https://unpkg.com/three/examples/jsm/controls/OrbitControls.js?module";
  import { PCDLoader } from 'https://unpkg.com/three/examples/jsm/loaders/PCDLoader.js?module';

  let cameras = [], scenes = [], renderers = [];
  // let path = "assets/kitchen_every_10.pcd";
  // let path = "assets/bedroom_every_10.pcd";
  let renderer_elements = document.getElementsByClassName("viewer-3d");
  let metadata = {
    "kitchen": {
      "path": "assets/kitchen_every_10.pcd",
      "posx": 3,
      "posy": 3,
      "posz": 9,
      "rotx": -0.25,
      "roty": 0.5,
      "rotz": 0.1,
    },
    "bedroom": {
      "path": "assets/bedroom_every_10.pcd",
      "posx": -0.07,
      "posy": 0.41,
      "posz": 10,
      "rotx": -0.04,
      "roty": 0.0,
      "rotz": 0.0,
    },
  };

  init();
  render();

  function init() {
    for (let i = 0; i < renderer_elements.length; i++) {
      let renderer_element = renderer_elements[i];
      if (renderer_element.getElementsByTagName("canvas").length != 0) {
        // Already initialized.
        continue;
      }
      let data = metadata[renderer_element.id];
      let path = data["path"];
      let renderer = new THREE.WebGLRenderer({ antialias: true });
      renderers.push(renderer);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(renderer_element.clientWidth, renderer_element.clientWidth);
      renderer_element.appendChild(renderer.domElement);

      let scene = new THREE.Scene();
      scenes.push(scene);
      scene.background = new THREE.Color(0xeeeeee);

      let camera = new THREE.PerspectiveCamera(30, 1, 0.01, 40);
      cameras.push(camera);
      // camera.position.set( 0, 0, 10 );
      camera.position.set(data["posx"], data["posy"], data["posz"]);
      camera.rotation.x = data["rotx"];
      camera.rotation.y = data["roty"];
      camera.rotation.z = data["rotz"];

      scene.add(camera);

      const controls = new OrbitControls(camera, renderer.domElement);
      controls.addEventListener('change', render); // use if there is no animation loop
      controls.minDistance = 0.5;
      controls.maxDistance = 10;

      const loader = new PCDLoader();
      loader.load(path, function (points) {

        points.geometry.center();
        points.geometry.rotateX(Math.PI);
        points.name = path;
        points.material.size *= 8;
        scene.add(points);
        render();
      });
    }
  }

  const resizeObserver = new ResizeObserver((entries) => {
    for (const entry of entries) {
      for (const renderer of renderers) {
        renderer.setSize(entry.contentRect.width, entry.contentRect.width);
      }
    }
  });

  for (const renderer_element of renderer_elements) {
    resizeObserver.observe(renderer_element);
  }

  function render() {
    for (let i = 0; i < scenes.length; i++) {
      renderers[i].render(scenes[i], cameras[i]);
    }
  }

  const imageDepthResizeObserver = new ResizeObserver((entries) => {
    initComparisons();
  });

  imageDepthResizeObserver.observe(document.getElementsByClassName('mono-depth-results-container')[0]);

  var baseImages = document.getElementsByClassName("img-comp-base");
  var overlayImages = document.getElementsByClassName("img-comp-overlay");
  // Sliders for image / depth comparison.
  function initComparisons() {
    var i;
    for (i = 0; i < overlayImages.length; i++) {
      /* Once for each "overlay" element:
      pass the "overlay" element as a parameter when executing the compareImages function: */
      compareImages(overlayImages[i], baseImages[i]);
    }
    function compareImages(img, base_img) {
      var slider, img, clicked = 0, w, h;
      /* Get the width and height of the img element */
      w = base_img.offsetWidth;
      h = base_img.offsetHeight;
      /* Set the width of the img element to 50%: */
      img.style.width = (w / 2) + "px";
      /* Create slider: */
      let createSlider = (img.parentElement.getElementsByClassName('img-comp-slider').length == 0);
      if (createSlider) {
        slider = document.createElement("DIV");
        slider.setAttribute("class", "img-comp-slider");
        /* Insert slider */
        img.parentElement.insertBefore(slider, img);
      } else {
        slider = img.parentElement.getElementsByClassName("img-comp-slider")[0];
      }
      /* Position the slider in the middle: */
      slider.style.top = (h / 2) - (slider.offsetHeight / 2) + "px";
      slider.style.left = (w / 2) - (slider.offsetWidth / 2) + "px";
      /* Execute a function when the mouse button is pressed: */
      slider.addEventListener("mousedown", slideReady);
      /* And another function when the mouse button is released: */
      window.addEventListener("mouseup", slideFinish);
      /* Or touched (for touch screens: */
      slider.addEventListener("touchstart", slideReady);
      /* And released (for touch screens: */
      window.addEventListener("touchend", slideFinish);
      function slideReady(e) {
        /* Prevent any other actions that may occur when moving over the image: */
        e.preventDefault();
        /* The slider is now clicked and ready to move: */
        clicked = 1;
        /* Execute a function when the slider is moved: */
        window.addEventListener("mousemove", slideMove);
        window.addEventListener("touchmove", slideMove);
      }
      function slideFinish() {
        /* The slider is no longer clicked: */
        clicked = 0;
      }
      function slideMove(e) {
        var pos;
        /* If the slider is no longer clicked, exit this function: */
        if (clicked == 0) return false;
        /* Get the cursor's x position: */
        pos = getCursorPos(e)
        /* Prevent the slider from being positioned outside the image: */
        if (pos < 0) pos = 0;
        if (pos > w) pos = w;
        /* Execute a function that will resize the overlay image according to the cursor: */
        slide(pos);
      }
      function getCursorPos(e) {
        var a, x = 0;
        e = (e.changedTouches) ? e.changedTouches[0] : e;
        /* Get the x positions of the image: */
        a = img.getBoundingClientRect();
        /* Calculate the cursor's x coordinate, relative to the image: */
        x = e.pageX - a.left;
        /* Consider any page scrolling: */
        x = x - window.pageXOffset;
        return x;
      }
      function slide(x) {
        /* Resize the image: */
        img.style.width = x - 0.05 + "px";
        /* Position the slider: */
        slider.style.left = img.offsetWidth - (slider.offsetWidth / 2) + "px";
      }
    }
  }

  initComparisons();

</script>

</body>

</html>
